<%= stylesheet_link_tag 'products/products' %>
<div id="left-content">
	<h1>Editing Record For <%=h @location.location_profile.name %> at (<%=h @location.lat %>,<%=h @location.lng %>)</h1>
	<br />
	<% form_for(@location) do |f| %>
		<%= f.error_messages %>
		<br />
		<h2>
			<%= label_tag 'lat', 'Latitude' %><br />
			<%= f.text_field :lat %>
			<br />
			<%= label_tag 'lng', 'Longitude' %><br />
			<%= f.text_field :lng %>
			<br />
			<%= label_tag 'location_profile_name', 'Profile: ' %><br />
			<%= text_field_with_auto_complete :location, :location_profile_name, {:size => 30}, 
			{:skip_style => true, :url => formatted_location_profiles_path(:text), :method => :get, :param_name => 'search' } %>
		</h2>
		<br />
</div>
<div id="right-content">
	<p>
		<%= hidden_field_tag "location[category_ids][]", "" %>
		<%= hidden_field_tag "location[product_ids][]", "" %>
		<table border="1">
			<tr>
				<th><b>Categories</b></th>
				<th><b>Products</b></th>
			</tr>
			<% for category in Category.all %>
				<tr>
					<td><%= check_box_tag "location[category_ids][]", category.id,
					 category.location_profiles.include?(@location) %> <b><%=h category.name %></b></td>
					<td>
						<table>
							<tr>
								<th></th>
							</tr>
							<% for product in category.products %>
							<tr>
								<td><%= check_box_tag "location[product_ids][]", product.id, product.location_profiles.include?(@location) %> <b><%=h product.name %></b></td>
							</tr>
							<% end %>
						</table>
					</td>
				</tr>
			<% end %>
		</table>
	</p>
	<br />
	<p>
		<%= f.submit 'Update' %> <input type="button" value="Cancel" onclick="window.location.href='<%= location_path(@location) %>'"/>
	</p>
</div>
<% end %>