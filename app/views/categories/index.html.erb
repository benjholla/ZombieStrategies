<h1>Listing Categories</h1>

<table border="1">
  <tr>
    <th>Category Name</th>
	<th>Products</th>
	<th></th>
  </tr>

<% @categories.each do |category| %>
  <tr>
    <td><%=h category.name %></td>
	<td>
		<% if category.products.last %>
			<table>
		  	<tr>
		    	<th></th>
				<th></th>
		  	</tr>
			<% category.products.each do |product| %>
		  	<tr>
		    	<td><%=h product.name %></td>
		    	<td><%= link_to 'Edit', edit_product_path(product) %></td>
		    	<td><%= link_to 'Destroy', product, :confirm => 'Are you sure?', :method => :delete %></td>
		  	</tr>
			<% end %>
			</table>
		<% end %>
	</td>
    <td><%= link_to 'Edit', edit_category_path(category) %></td>
  </tr>
<% end %>
</table>

<br />
<% if authorized? %>
<input type="button" value="New Category" onclick="window.location.href='<%= new_category_path %>'"/>
<br />
<input type="button" value="New Product" onclick="window.location.href='<%= new_product_path %>'"/>
<br />
<% end %>
<input type="button" value="Location Map" onclick="window.location.href='<%= locations_path %>'"/>